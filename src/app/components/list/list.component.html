<div class="fs-list-container" [ngClass]="{ 'has-filter-input': listConfig.filterInput,
                                            'has-filters': listConfig.filterConfig?.items.length,
                                            'has-heading': listConfig.heading,
                                            'has-status': listConfig.status,
                                            'has-actions': listConfig.actions.length }">
  <!-- Header -->
  <div class="fs-list-header-container">
    <div class="fs-list-header"
        [ngClass]="{ 'no-wrap': listConfig.reoderEnabled || !listConfig.filterConfig?.items.length }">
      <div class="heading-container" *ngIf="listConfig.heading || listConfig.subheading">
        <h2 class="heading" *ngIf="listConfig.heading">{{listConfig.heading}}</h2>
        <span class="subheading" *ngIf="listConfig.subheading">{{listConfig.subheading}}</span>
      </div>
      <!-- Filters/actions -->
      <div class="fs-list-toolbar">
        <fs-filter
          class="fs-list-filter"
          *ngIf="listConfig.filterConfig"
          [hidden]="!listConfig.filterConfig?.items.length || listConfig.reoderEnabled"
          [filter]="listConfig.filterConfig"
          [sortUpdate]="listConfig?.sorting?.sortingChanged"
          [showSortBy]="!listConfig.status"
          [showFilterInput]="listConfig.filterInput"
        >
        </fs-filter>

        <!-- Actions -->
        <div class="fs-list-actions" *ngIf="listConfig.actions?.length">
          <ng-container *ngIf="!listConfig.reoderEnabled">
            <span *ngFor="let action of listConfig.menuActions" class="action-button">
              <button type="button"
                      mat-raised-button
                      (click)="action.click(action, $event)"
                      [ngClass]="action.classArray">
                <mat-icon *ngIf="action.icon">{{action.icon}}</mat-icon> {{ action.label }}
              </button>
          </span>
          </ng-container>
          <button type="button"
                  mat-icon-button
                  *ngIf="!listConfig.reoderEnabled"
                  [matMenuTriggerFor]="rowActionsRef"
                  [ngClass]="{
                    'hidden': !listConfig.kebabActions.length,
                    'show-mobile': !listConfig.kebabActions.length && listConfig.menuActions.length
                  }">
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #rowActionsRef>
            <button type="button"
                    class="hidden-mobile-menu-action"
                    mat-menu-item
                    *ngFor="let action of listConfig.menuActions"
                    (click)="action.click(row, $event)"
                    [ngClass]="action.classArray"
            >
              <mat-icon *ngIf="action.icon">{{action.icon}}</mat-icon> {{action.label}}
            </button>
            <button type="button"
                    mat-menu-item
                    *ngFor="let action of listConfig.kebabActions"
                    (click)="action.click(row, $event)"
                    [ngClass]="action.classArray"
            >
              <mat-icon *ngIf="action.icon">{{action.icon}}</mat-icon> {{action.label}}
            </button>
          </mat-menu>

          <button type="button"
                  mat-button
                  color="primary"
                  *ngIf="listConfig.reoderEnabled"
                  (click)="finishReorder()">
            DONE
          </button>
        </div>
        <!-- /Actions -->
      </div>
    </div>

    <!-- Status -->
    <fs-list-status
      [ngClass]="{'hidden-mobile': !listConfig.status}"
      [dataChangedRef]="listConfig.data$"
      [sorting]="listConfig.sorting"
      [paging]="listConfig.paging"
      *ngIf="listConfig.paging && !listConfig.reoderEnabled && !listConfig.scrollable">
    </fs-list-status>
  </div>


  <!-- Table implementation -->
  <div class="fs-list-table-container scrollable"
       *ngIf="listConfig.scrollable"
       fsScroll
       [style.height]="listConfig.scrollable?.height || 'auto'"
       [(isLoading)]="listConfig.loading"
       [activationDown]="listConfig.scrollable?.activationDown || 85"
       [loaderDiametr]="listConfig.scrollable?.loaderDiametr || 25"
       (load)="nextPage()">
    <ng-template [ngTemplateOutlet]="table"></ng-template>
  </div>

  <div class="fs-list-table-container"
       *ngIf="!listConfig.scrollable">
    <ng-template [ngTemplateOutlet]="table"></ng-template>
  </div>

  <ng-template #table>
    <table class="fs-list-table" role="grid">
      <thead fs-list-head
             class="fs-list-head"
             role="rowgroup"
             [ngClass]="listConfig.theadClass"
             [columns]="listConfig.columns"
             [sorting]="listConfig.sorting"
             [hasRowActions]="listConfig.hasRowActions"
             [reorder]="listConfig.reoderEnabled">
      </thead>

      <tbody fs-list-body
             class="fs-list-body"
             role="rowgroup"
             [class.loading]="listConfig.loading"
             [rows]="displayRows"
             [rowActionsRaw]="listConfig.rowActionsRaw"
             [rowEvents]="listConfig.rowEvents"
             [rowClass]="listConfig.rowClass"
             [columns]="listConfig.columns"
             [hasFooter]="listConfig.hasFooter"
             [reorder]="listConfig.reoderEnabled">
      </tbody>

      <tfoot fs-list-footer
             class="fs-list-footer"
             *ngIf="listConfig.hasFooter"
             [columns]="listConfig.columns"
             [hasRowActions]="listConfig.hasRowActions">
      </tfoot>
    </table>
  </ng-template>

  <fs-list-pagination
    *ngIf="listConfig.paging.enabled && !listConfig.scrollable"
    [dataChangedRef]="listConfig.data$"
    [pagination]="listConfig.paging">
  </fs-list-pagination>
</div>
